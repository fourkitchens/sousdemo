{"version":3,"file":"js/03-organisms/navigation/secondary/secondary.js","mappings":"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","sources":["webpack://emulsify-drupal/./components/03-organisms/navigation/secondary/secondary.js"],"sourcesContent":["Drupal.behaviors.secondaryNav = {\n  attach(context) {\n    // Selectors\n    const body = context.querySelector('body');\n    const menu = context.querySelector('#secondary_nav');\n    // Secondary toggle for the whole menu tree.\n    const menuSecondaryToggle = context.querySelector(\n      '#secondary_nav > .secondary_nav__toggle',\n    );\n    const parentItem = context.querySelectorAll(\n      '.secondary_nav__item--with-sub',\n    );\n    const toggles = context.querySelectorAll(\n      '.secondary_nav__item > .secondary_nav__toggle',\n    );\n    const menuWrapper = context.querySelector(\n      '.secondary_nav__menu-list-wrapper--level-0',\n    );\n    const menuItems = context.querySelectorAll(`.secondary_nav__item`);\n    const mobilePrev = context.querySelector(`.secondary_nav__prev`);\n    const mobileClose = context.querySelector(`.secondary_nav__close`);\n    const header = context.querySelector('.site-header__primary-nav');\n    const currentTitle = context.querySelector('h3[data-current-tile]');\n\n    if (menu && header) {\n      const rect = menu.getBoundingClientRect();\n      const position = rect.top - header.clientHeight;\n\n      const createObserver = () => {\n        const options = {\n          root: null,\n          trackVisibility: true,\n          delay: 100,\n          threshold: [1],\n        };\n\n        const handler = () => {\n          menu.classList.toggle('stuck', window.scrollY >= position);\n        };\n\n        if ('IntersectionObserver' in window) {\n          const observer = new window.IntersectionObserver(handler, options);\n          observer.observe(menu);\n        }\n      };\n\n      window.addEventListener(\n        'scroll',\n        () => {\n          createObserver();\n        },\n        {\n          passive: true,\n        },\n      );\n    }\n\n    // Adjust the mobile menu tile height when shifting between levels\n    function setMenuHeight(el) {\n      const menuList = el.parentElement.querySelector(\n        '.secondary_nav__menu-list-wrapper > .secondary_nav__menu-list',\n      );\n      if (window.innerWidth < 1040 && menuList) {\n        menuWrapper.style.height = `calc(${menuList.offsetHeight}px + 4rem)`;\n      }\n    }\n\n    // Set the title of the mobile menu tile when shifting between levels\n    function setMobileTitle(el) {\n      if (\n        currentTitle.innerText ===\n        currentTitle.getAttribute('data-current-tile')\n      ) {\n        currentTitle.innerText = el.previousElementSibling.innerText;\n      } else {\n        currentTitle.innerText = currentTitle.getAttribute('data-current-tile');\n      }\n    }\n\n    if (parentItem) {\n      Array.from(parentItem).forEach((item) => {\n        item.addEventListener('click', () => {\n          const dropdown = item.lastElementChild;\n          const itemPos = item.getBoundingClientRect();\n          const parentPos = menu.getBoundingClientRect();\n          const relativePos = itemPos.left - parentPos.left;\n\n          if (window.innerWidth > 1040) {\n            dropdown.style.width = `${item.offsetWidth}px`;\n            dropdown.style.left = `${relativePos}px`;\n          } else {\n            dropdown.style.width = '100%';\n            dropdown.style.left = `0`;\n          }\n        });\n      });\n    }\n\n    if (menuSecondaryToggle) {\n      // scroll down to the secondary menu if alerts are present.\n      menuSecondaryToggle.addEventListener('click', () => {\n        // Prevent body scrolling when menu it active.\n        body.toggleAttribute('data-body-frozen');\n        mobilePrev.classList.add('visually-hidden');\n        setMenuHeight(menuSecondaryToggle);\n      });\n    }\n\n    if (mobileClose) {\n      mobileClose.addEventListener('click', () => {\n        menu.classList.toggle('menu--open');\n        body.toggleAttribute('data-body-frozen');\n        // reset all existing items\n        Array.prototype.forEach.call(\n          menu\n            .querySelector(`[class*='__menu-list']`)\n            .querySelectorAll(`.secondary_nav__toggle`),\n          (i) => {\n            i.setAttribute('aria-expanded', 'false');\n            i.nextElementSibling.setAttribute('inert', '');\n          },\n        );\n        // Reset any open levels.\n        Array.prototype.forEach.call(menuItems, (item) => {\n          item.classList.remove('sub--open');\n        });\n        // Toggle the button label.\n        menuSecondaryToggle.setAttribute(\n          'aria-expanded',\n          menuSecondaryToggle.getAttribute('aria-expanded') === 'true'\n            ? 'false'\n            : 'true',\n        );\n        const label = menuSecondaryToggle.lastElementChild;\n        if (menuSecondaryToggle.getAttribute('aria-expanded') === 'true') {\n          label.innerText = 'Close';\n        } else {\n          label.innerText = menuSecondaryToggle.getAttribute('aria-label');\n        }\n      });\n    }\n\n    if (mobilePrev) {\n      mobilePrev.addEventListener('click', () => {\n        // Reset any open levels.\n        Array.prototype.forEach.call(menuItems, (item) => {\n          item.classList.remove('sub--open');\n        });\n        mobilePrev.classList.add('visually-hidden');\n        setMenuHeight(menuSecondaryToggle);\n        setMobileTitle(mobilePrev);\n      });\n    }\n\n    Array.prototype.forEach.call(toggles, (toggle) => {\n      toggle.addEventListener('click', () => {\n        setMenuHeight(toggle);\n        setMobileTitle(toggle);\n        mobilePrev.classList.remove('visually-hidden');\n      });\n    });\n\n    // Hide menu when escape key press.\n    document.addEventListener('keyup', (e) => {\n      if (e.key === 'Escape') {\n        if (menuSecondaryToggle.matches('[aria-expanded=\"true\"]')) {\n          menuSecondaryToggle.click();\n        }\n      }\n    });\n\n    window.addEventListener('click', (e) => {\n      if (menu && !menu.contains(e.target)) {\n        // Reset any open levels.\n        Array.from(document.getElementsByClassName(`${menu.id}__item`)).forEach(\n          (g) => g.classList.remove('sub--open'),\n        );\n        // Reset all aria-expanded.\n        Array.prototype.forEach.call(\n          menu.querySelectorAll(`button, [href], [tabindex]`),\n          (i) => {\n            i.setAttribute('aria-expanded', 'false');\n          },\n        );\n      }\n    });\n  },\n};\n\nDrupal.behaviors.secondaryNavScroll = {\n  attach(context) {\n    // Selectors.\n    const menu = context.querySelector('#secondary_nav');\n    const secondaryWrapper = context.querySelector('.secondary_nav__wrapper');\n    if (!secondaryWrapper) {\n      return;\n    }\n    const secondary = context.querySelector(\n      '.secondary_nav__menu-list:not(.secondary_nav__menu-list-wrapper--sub)',\n    );\n    const secondaryControls = context.querySelectorAll(\n      '.secondary_nav__scroll',\n    );\n    const secondaryLinks = context.querySelectorAll('.secondary_nav__link');\n    const secondaryButton = context.querySelector('.secondary_nav__toggle');\n    const secondaryInner = context.querySelector('.secondary_nav');\n    const controlsWidth = context.querySelector(\n      '.secondary_nav__scroll--left',\n    ).offsetWidth;\n    let scrollIndicatorDir;\n    /**\n     * getFirstVisible\n     * @description Get the first item that is visible (not overflown).\n     * @returns The value of the left edge of the first fully visible item plus\n     * the width of the controls so that things aren't visually hidden by the\n     * absolutely positioned elements.\n     */\n    function getFirstVisible() {\n      const secondaryLeft = secondary.getBoundingClientRect().left;\n      const secondaryItems = secondary.querySelectorAll(\n        '.secondary_nav__item--level-0:not(.secondary_nav__item--level-1)',\n      );\n      const visibleItems = [];\n\n      secondaryItems.forEach((item) => {\n        if (\n          item.getBoundingClientRect().right >\n          secondaryLeft + controlsWidth\n        ) {\n          visibleItems.push(item);\n        }\n      });\n\n      return visibleItems[1].offsetLeft - controlsWidth;\n    }\n\n    /**\n     * getLastHidden\n     * @description Get the last item that is overflown (not visible).\n     * @returns The value of the left edge of the first partially hidden item\n     * minus the width of the controls so that things aren't visually hidden by\n     * the absolutely positioned elements.\n     */\n    function getLastHidden() {\n      const secondaryLeft = secondary.getBoundingClientRect().left;\n      const secondaryItems = secondary.querySelectorAll(\n        '.secondary_nav__item--level-0:not(.secondary_nav__item--level-1)',\n      );\n      const hiddenItems = [];\n\n      secondaryItems.forEach((item) => {\n        if (item.getBoundingClientRect().left < secondaryLeft) {\n          hiddenItems.push(item);\n        }\n      });\n      // @TODO: if the user clicks the left arrow twice quickly when only the\n      // first item is hidden (and before the arrow can disappear), this line\n      // throws a js error. Not a huge deal, but could probably be refactored to\n      // prevent it from happening.\n      return hiddenItems[hiddenItems.length - 1].offsetLeft - controlsWidth;\n    }\n\n    /**\n     * setOverflow\n     * @description Get the positions of the secondary_nav to determine whether an\n     * overflow situation is in play.\n     */\n    function setOverflow() {\n      const secondaryLeft = secondaryWrapper.getBoundingClientRect().left;\n      const secondaryRight = secondaryWrapper.getBoundingClientRect().right;\n      const firstsecondaryLeft = secondary\n        .querySelector(\n          '.secondary_nav__item--level-0:not(.secondary_nav__item--level-1):first-child',\n        )\n        .getBoundingClientRect().left;\n      const lastsecondaryRight = Math.floor(\n        secondary\n          .querySelector(\n            '.secondary_nav__item--level-0:not(.secondary_nav__item--level-1):last-child',\n          )\n          .getBoundingClientRect().right,\n      );\n\n      if (firstsecondaryLeft < secondaryLeft) {\n        // If left side of first secondary_item is < left side of secondary_nav.\n        // And right side of last secondary_item is > right side of secondary_nav.\n        if (lastsecondaryRight > secondaryRight) {\n          if (scrollIndicatorDir !== 'both') {\n            scrollIndicatorDir = 'both';\n            secondaryInner.setAttribute('data-scroll-indicator', 'both');\n          }\n          // If left side of first secondary_item is < left side of secondary_nav.\n          // But right side of last secondary_item is <= right side of secondary_nav.\n        } else if (scrollIndicatorDir !== 'left') {\n          scrollIndicatorDir = 'left';\n          secondaryInner.setAttribute('data-scroll-indicator', 'left');\n        }\n        // If left side of first secondary_item is >= left side of secondary_nav.\n        // And right side of last secondary_item is > right side of secondary_nav.\n      } else if (lastsecondaryRight > secondaryRight) {\n        if (scrollIndicatorDir !== 'right') {\n          scrollIndicatorDir = 'right';\n          secondaryInner.setAttribute('data-scroll-indicator', 'right');\n        }\n        // If left side of first secondary_item is >= left side of secondary_nav.\n        // And right side of last secondary_item is <= right side of secondary_nav.\n      } else {\n        scrollIndicatorDir = 'none';\n        secondaryInner.setAttribute('data-scroll-indicator', 'none');\n      }\n    }\n\n    /**\n     * mouseNav\n     * @description Support mouse navigation when horizontal scrolling occurs.\n     */\n    function mouseNav(direction) {\n      secondary.scrollLeft =\n        direction === 'right' ? getFirstVisible() : getLastHidden();\n    }\n\n    /**\n     * ensureVisible\n     * @description Ensure the focused tab is fully visible (not overflown).\n     * @param {HTMLElement} item The focused item.\n     */\n    function ensureVisible(item) {\n      const secondaryLeft = secondaryWrapper.getBoundingClientRect().left;\n      const secondaryRight = secondaryWrapper.getBoundingClientRect().right;\n\n      // if right side overflows control, set to left + control.\n      if (\n        Math.floor(item.getBoundingClientRect().right) >\n        secondaryRight - controlsWidth\n      ) {\n        // If overflow right or both.\n        if (\n          secondaryInner.getAttribute('data-scroll-indicator') === 'right' ||\n          secondaryInner.getAttribute('data-scroll-indicator') === 'both'\n        ) {\n          secondary.scrollLeft = item.parentElement.offsetLeft - controlsWidth;\n        }\n      }\n      // If left side overflows control, set to left + control.\n      else if (\n        Math.floor(item.getBoundingClientRect().left) <\n        secondaryLeft + controlsWidth\n      ) {\n        // If overflow left or both.\n        if (\n          secondaryInner.getAttribute('data-scroll-indicator') === 'left' ||\n          secondaryInner.getAttribute('data-scroll-indicator') === 'both'\n        ) {\n          secondaryWrapper.scrollLeft =\n            item.parentElement.offsetLeft - controlsWidth;\n        }\n      }\n    }\n\n    /**\n     * showAllsecondary_nav\n     * @description remove secondary_nav-overflow value.\n     */\n    function showAllsecondary() {\n      secondaryWrapper.setAttribute('data-secondary_nav-overflow', 'expanded');\n    }\n\n    // Show all secondary_nav on mobile.\n    if (secondaryButton) {\n      secondaryButton.addEventListener('click', () => {\n        showAllsecondary();\n        setOverflow();\n      });\n    }\n\n    /**\n     * debounce\n     * @description Debounce to only run a function at most once every 200ms.\n     * @param {} func The function to be run after the timeout.\n     */\n    function debounce(func) {\n      let timer;\n      return function debounceFunction(event) {\n        if (timer) clearTimeout(timer);\n        timer = setTimeout(func, 200, event);\n      };\n    }\n\n    /**\n     * linksListeners\n     * @description Support focus visualization.\n     */\n    secondaryLinks.forEach((link) => {\n      link.addEventListener('focus', () => {\n        ensureVisible(link);\n      });\n    });\n\n    /**\n     * init\n     */\n    setOverflow();\n\n    secondaryControls.forEach((control) => {\n      control.addEventListener('click', (e) => {\n        e.preventDefault();\n\n        if (control.classList.contains('secondary_nav__scroll--right')) {\n          mouseNav('right');\n        } else {\n          mouseNav('left');\n        }\n\n        // Reset any open levels.\n        Array.from(document.getElementsByClassName(`${menu.id}__item`)).forEach(\n          (g) => g.classList.remove('sub--open'),\n        );\n        // Reset all aria-expanded.\n        Array.prototype.forEach.call(\n          menu.querySelectorAll(`button, [href], [tabindex]`),\n          (i) => {\n            i.setAttribute('aria-expanded', 'false');\n          },\n        );\n      });\n    });\n\n    secondary.addEventListener('scroll', () => {\n      setOverflow();\n      // Reset any open levels.\n      Array.from(document.getElementsByClassName(`${menu.id}__item`)).forEach(\n        (g) => g.classList.remove('sub--open'),\n      );\n      // Reset all aria-expanded.\n      Array.prototype.forEach.call(\n        menu.querySelectorAll(`button, [href], [tabindex]`),\n        (i) => {\n          i.setAttribute('aria-expanded', 'false');\n        },\n      );\n    });\n\n    // Listen for window resize.\n    window.addEventListener(\n      'resize',\n      debounce(function resizeListener() {\n        setOverflow();\n      }),\n    );\n  },\n};\n"],"names":["Drupal","behaviors","secondaryNav","attach","context","setMenuHeight","el","menuList","parentElement","querySelector","window","innerWidth","menuWrapper","style","height","offsetHeight","setMobileTitle","currentTitle","innerText","getAttribute","previousElementSibling","body","menu","menuSecondaryToggle","parentItem","querySelectorAll","toggles","menuItems","mobilePrev","mobileClose","header","rect","getBoundingClientRect","position","top","clientHeight","createObserver","handler","classList","toggle","scrollY","observer","IntersectionObserver","root","trackVisibility","delay","threshold","observe","addEventListener","passive","Array","from","forEach","item","dropdown","lastElementChild","itemPos","parentPos","relativePos","left","width","offsetWidth","toggleAttribute","add","prototype","call","i","setAttribute","nextElementSibling","remove","label","document","e","key","matches","click","contains","target","getElementsByClassName","id","g","secondaryNavScroll","getFirstVisible","secondaryLeft","secondary","secondaryItems","visibleItems","right","controlsWidth","push","offsetLeft","getLastHidden","hiddenItems","length","setOverflow","secondaryWrapper","secondaryRight","firstsecondaryLeft","lastsecondaryRight","Math","floor","scrollIndicatorDir","secondaryInner","mouseNav","direction","scrollLeft","ensureVisible","showAllsecondary","debounce","func","timer","event","clearTimeout","setTimeout","secondaryControls","secondaryLinks","secondaryButton","link","control","preventDefault"],"sourceRoot":""}